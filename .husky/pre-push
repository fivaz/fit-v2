#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# 1ï¸âƒ£ Check for uncommitted pnpm-lock.yaml
if git diff --quiet pnpm-lock.yaml && git diff --cached --quiet pnpm-lock.yaml; then
  echo "ğŸ” No changes in pnpm-lock.yaml, continuing..."
else
  echo "âŒ pnpm-lock.yaml has uncommitted changes! Commit them before pushing."
  exit 1
fi

# 2ï¸âƒ£ Install dependencies (safe step)
echo "ğŸ” Installing dependencies..."
pnpm install

# 3ï¸âƒ£ Build
echo "ğŸ” Running local build before push..."
pnpm build